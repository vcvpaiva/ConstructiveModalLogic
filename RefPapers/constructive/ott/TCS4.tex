% generated by Ott 0.25 from: TCS4.ott
\documentclass[11pt]{article}
\usepackage{amsmath,amssymb}
\usepackage{supertabular}
\usepackage{geometry}
\usepackage{ifthen}
\usepackage{alltt}%hack
\geometry{a4paper,dvips,twoside,left=22.5mm,right=22.5mm,top=20mm,bottom=30mm}
\usepackage{color}
\newcommand{\ottdrule}[4][]{{\displaystyle\frac{\begin{array}{l}#2\end{array}}{#3}\quad\ottdrulename{#4}}}
\newcommand{\ottusedrule}[1]{\[#1\]}
\newcommand{\ottpremise}[1]{ #1 \\}
\newenvironment{ottdefnblock}[3][]{ \framebox{\mbox{#2}} \quad #3 \\[0pt]}{}
\newenvironment{ottfundefnblock}[3][]{ \framebox{\mbox{#2}} \quad #3 \\[0pt]\begin{displaymath}\begin{array}{l}}{\end{array}\end{displaymath}}
\newcommand{\ottfunclause}[2]{ #1 \equiv #2 \\}
\newcommand{\ottnt}[1]{\mathit{#1}}
\newcommand{\ottmv}[1]{\mathit{#1}}
\newcommand{\ottkw}[1]{\mathbf{#1}}
\newcommand{\ottsym}[1]{#1}
\newcommand{\ottcom}[1]{\text{#1}}
\newcommand{\ottdrulename}[1]{\textsc{#1}}
\newcommand{\ottcomplu}[5]{\overline{#1}^{\,#2\in #3 #4 #5}}
\newcommand{\ottcompu}[3]{\overline{#1}^{\,#2<#3}}
\newcommand{\ottcomp}[2]{\overline{#1}^{\,#2}}
\newcommand{\ottgrammartabular}[1]{\begin{supertabular}{llcllllll}#1\end{supertabular}}
\newcommand{\ottmetavartabular}[1]{\begin{supertabular}{ll}#1\end{supertabular}}
\newcommand{\ottrulehead}[3]{$#1$ & & $#2$ & & & \multicolumn{2}{l}{#3}}
\newcommand{\ottprodline}[6]{& & $#1$ & $#2$ & $#3 #4$ & $#5$ & $#6$}
\newcommand{\ottfirstprodline}[6]{\ottprodline{#1}{#2}{#3}{#4}{#5}{#6}}
\newcommand{\ottlongprodline}[2]{& & $#1$ & \multicolumn{4}{l}{$#2$}}
\newcommand{\ottfirstlongprodline}[2]{\ottlongprodline{#1}{#2}}
\newcommand{\ottbindspecprodline}[6]{\ottprodline{#1}{#2}{#3}{#4}{#5}{#6}}
\newcommand{\ottprodnewline}{\\}
\newcommand{\ottinterrule}{\\[5.0mm]}
\newcommand{\ottafterlastrule}{\\}
\newcommand{\ottmetavars}{
\ottmetavartabular{
 $ \mathit{termvar} ,\, \mathit{x} ,\, \mathit{y} $ & \ottcom{term variable} \\
 $ \ottmv{index} ,\, \ottmv{i} ,\, \ottmv{j} ,\, \ottmv{k} $ &  \\
}}

\newcommand{\ottterm}{
\ottrulehead{\ottnt{term}  ,\ \ottnt{t}  ,\ \ottnt{r}  ,\ \ottnt{s}  ,\ \ottnt{n}}{::=}{\ottcom{term}}\ottprodnewline
\ottfirstprodline{|}{\mathit{x}}{}{}{}{\ottcom{variable}}\ottprodnewline
\ottprodline{|}{ \mathsf{contra} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \lambda  \mathit{x}  :  \ottnt{T} . \ottnt{t} }{}{}{}{\ottcom{unary functions}}\ottprodnewline
\ottprodline{|}{\ottnt{t_{{\mathrm{1}}}} \, \ottnt{t_{{\mathrm{2}}}}}{}{}{}{\ottcom{function application}}\ottprodnewline
\ottprodline{|}{\mathsf{unbox}_\Box\, \, \ottnt{t}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\mathsf{unbox}_\blacksquare\, \, \ottnt{t}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\Box \, \ottnt{t}}{}{}{}{\ottcom{past necessity functor}}\ottprodnewline
\ottprodline{|}{\Diamond \, \ottnt{t}}{}{}{}{\ottcom{past possibility functor}}\ottprodnewline
\ottprodline{|}{\blacksquare \, \ottnt{t}}{}{}{}{\ottcom{necessity functor}}\ottprodnewline
\ottprodline{|}{\mathbin{\blacklozenge} \, \ottnt{t}}{}{}{}{\ottcom{possibility functor}}\ottprodnewline
\ottprodline{|}{ \mathsf{adj_R}\,\blacklozenge  \mathit{y}  =  \mathit{x} \,\mathsf{in}\,\Box  \ottnt{t} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathsf{adj_L}\,\blacklozenge  \mathit{y}  =  \mathit{x} \,\mathsf{in}\, \ottnt{t} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathsf{let}_\Box\, \Gamma \,\mathsf{be}\, \ottnt{t_{{\mathrm{1}}}} \,\mathsf{in}\, \ottnt{t_{{\mathrm{2}}}} }{}{}{}{\ottcom{past necessity elim}}\ottprodnewline
\ottprodline{|}{ \mathsf{let}_\blacksquare\, \Gamma \,\mathsf{be}\, \ottnt{t_{{\mathrm{1}}}} \,\mathsf{in}\, \ottnt{t_{{\mathrm{2}}}} }{}{}{}{\ottcom{past necessity elim}}\ottprodnewline
\ottprodline{|}{ \mathsf{let}\,\Diamond  \mathit{x} : \ottnt{A} = \ottnt{s}  \mid  \Gamma \,\mathsf{be}\, \ottnt{t_{{\mathrm{1}}}} \,\mathsf{in}\, \ottnt{t_{{\mathrm{2}}}} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathsf{let}\,\blacklozenge  \mathit{x} : \ottnt{A} = \ottnt{s}  \mid  \Gamma \,\mathsf{be}\, \ottnt{t_{{\mathrm{1}}}} \,\mathsf{in}\, \ottnt{t_{{\mathrm{2}}}} }{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \ottnt{t}  \ottsym{)}} {\textsf{S}}{}{}{}}

\newcommand{\ottform}{
\ottrulehead{\ottnt{form}  ,\ \ottnt{type}  ,\ \ottnt{A}  ,\ \ottnt{B}  ,\ \ottnt{C}  ,\ \ottnt{T}}{::=}{\ottcom{formula and type}}\ottprodnewline
\ottfirstprodline{|}{\perp}{}{}{}{\ottcom{false or the empty type}}\ottprodnewline
\ottprodline{|}{\Box \, \ottnt{A}}{}{}{}{\ottcom{past necessity}}\ottprodnewline
\ottprodline{|}{\blacksquare \, \ottnt{A}}{}{}{}{\ottcom{necessity}}\ottprodnewline
\ottprodline{|}{\Diamond \, \ottnt{A}}{}{}{}{\ottcom{past possibility}}\ottprodnewline
\ottprodline{|}{\mathbin{\blacklozenge} \, \ottnt{A}}{}{}{}{\ottcom{possibility}}\ottprodnewline
\ottprodline{|}{\ottnt{A}  \to  \ottnt{B}}{}{}{}{\ottcom{implication}}\ottprodnewline
\ottprodline{|}{ \ottnt{A}  \limp  \ottnt{B} }{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{F} \, \ottnt{X}}{}{}{}{}}

\newcommand{\ottiform}{
\ottrulehead{\ottnt{iform}  ,\ \ottnt{X}  ,\ \ottnt{Y}  ,\ \ottnt{Z}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottnt{X}  \to  \ottnt{Y}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{Gf} \, \ottnt{A}}{}{}{}{}}

\newcommand{\ottG}{
\ottrulehead{\Gamma  ,\ \Delta}{::=}{\ottcom{type context}}\ottprodnewline
\ottfirstprodline{|}{\emptyset}{}{}{}{\ottcom{empty context}}\ottprodnewline
\ottprodline{|}{\ottnt{A}}{}{}{}{\ottcom{formula el}}\ottprodnewline
\ottprodline{|}{\mathit{x}  \ottsym{:}  \ottnt{T}}{}{}{}{\ottcom{typed el}}\ottprodnewline
\ottprodline{|}{\Gamma  \ottsym{,}  \Gamma'}{}{}{}{\ottcom{append}}}

\newcommand{\ottTh}{
\ottrulehead{\Theta  ,\ \Phi}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\emptyset}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{X}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\Theta_{{\mathrm{1}}}  \ottsym{,}  \Theta_{{\mathrm{2}}}}{}{}{}{}}

\newcommand{\ottgrammar}{\ottgrammartabular{
\ottterm\ottinterrule
\ottform\ottinterrule
\ottiform\ottinterrule
\ottG\ottinterrule
\ottTh\ottafterlastrule
}}

% defnss
% defns Jtype
%% defn iseq
\newcommand{\ottdruleiXXCArleftName}[0]{\ottdrulename{i\_CArleft}}
\newcommand{\ottdruleiXXCArleft}[1]{\ottdrule[#1]{%
\ottpremise{\Theta  \vdash_{\mathcal{C} }  \ottnt{X}  \quad  \ottnt{Y}  \ottsym{,}  \Phi  \vdash_{\mathcal{C} }  \ottnt{Z}}%
}{
\Theta  \ottsym{,}  \ottnt{X}  \to  \ottnt{Y}  \ottsym{,}  \Phi  \vdash_{\mathcal{C} }  \ottnt{Z}}{%
{\ottdruleiXXCArleftName}{}%
}}


\newcommand{\ottdruleiXXCArRightName}[0]{\ottdrulename{i\_CArRight}}
\newcommand{\ottdruleiXXCArRight}[1]{\ottdrule[#1]{%
\ottpremise{\Theta  \ottsym{,}  \ottnt{X}  \vdash_{\mathcal{C} }  \ottnt{Y}}%
}{
\Theta  \vdash_{\mathcal{C} }  \ottnt{X}  \to  \ottnt{Y}}{%
{\ottdruleiXXCArRightName}{}%
}}


\newcommand{\ottdruleiXXGRightName}[0]{\ottdrulename{i\_GRight}}
\newcommand{\ottdruleiXXGRight}[1]{\ottdrule[#1]{%
\ottpremise{\Theta  \ottsym{;}  \emptyset  \vdash_{\mathcal{L} }  \ottnt{A}}%
}{
\Theta  \vdash_{\mathcal{C} }  \ottkw{Gf} \, \ottnt{A}}{%
{\ottdruleiXXGRightName}{}%
}}

\newcommand{\ottdefniseq}[1]{\begin{ottdefnblock}[#1]{$\Theta  \vdash_{\mathcal{C} }  \ottnt{Z}$}{}
\ottusedrule{\ottdruleiXXCArleft{}}
\ottusedrule{\ottdruleiXXCArRight{}}
\ottusedrule{\ottdruleiXXGRight{}}
\end{ottdefnblock}}

%% defn lseq
\newcommand{\ottdrulelXXIArLeftName}[0]{\ottdrulename{l\_IArLeft}}
\newcommand{\ottdrulelXXIArLeft}[1]{\ottdrule[#1]{%
\ottpremise{\Theta  \vdash_{\mathcal{C} }  \ottnt{X}  \quad  \ottnt{Y}  \ottsym{,}  \Phi  \ottsym{;}  \Gamma  \vdash_{\mathcal{L} }  \ottnt{A}}%
}{
\Theta  \ottsym{,}  \ottnt{X}  \to  \ottnt{Y}  \ottsym{,}  \Phi  \ottsym{;}  \Gamma  \vdash_{\mathcal{L} }  \ottnt{A}}{%
{\ottdrulelXXIArLeftName}{}%
}}


\newcommand{\ottdrulelXXLArRightName}[0]{\ottdrulename{l\_LArRight}}
\newcommand{\ottdrulelXXLArRight}[1]{\ottdrule[#1]{%
\ottpremise{\Theta  \ottsym{;}  \Gamma  \ottsym{,}  \ottnt{A}  \vdash_{\mathcal{L} }  \ottnt{B}}%
}{
\Theta  \ottsym{;}  \Gamma  \vdash_{\mathcal{L} }   \ottnt{A}  \limp  \ottnt{B} }{%
{\ottdrulelXXLArRightName}{}%
}}


\newcommand{\ottdrulelXXLArLeftName}[0]{\ottdrulename{l\_LArLeft}}
\newcommand{\ottdrulelXXLArLeft}[1]{\ottdrule[#1]{%
\ottpremise{\Theta  \ottsym{;}  \Gamma  \vdash_{\mathcal{L} }  \ottnt{A}  \quad  \Phi  \ottsym{;}  \Delta  \ottsym{,}  \ottnt{B}  \vdash_{\mathcal{L} }  \ottnt{C}}%
}{
\Theta  \ottsym{;}  \Gamma  \ottsym{,}   \ottnt{A}  \limp  \ottnt{B}   \ottsym{,}  \Delta  \vdash_{\mathcal{L} }  \ottnt{C}}{%
{\ottdrulelXXLArLeftName}{}%
}}


\newcommand{\ottdrulelXXFRightName}[0]{\ottdrulename{l\_FRight}}
\newcommand{\ottdrulelXXFRight}[1]{\ottdrule[#1]{%
\ottpremise{\Theta  \vdash_{\mathcal{C} }  \ottnt{X}}%
}{
\Theta  \ottsym{;}  \emptyset  \vdash_{\mathcal{L} }  \ottkw{F} \, \ottnt{X}}{%
{\ottdrulelXXFRightName}{}%
}}


\newcommand{\ottdrulelXXFLeftName}[0]{\ottdrulename{l\_FLeft}}
\newcommand{\ottdrulelXXFLeft}[1]{\ottdrule[#1]{%
\ottpremise{\Theta  \ottsym{,}  \ottnt{X}  \ottsym{;}  \Gamma  \vdash_{\mathcal{L} }  \ottnt{A}}%
}{
\Theta  \ottsym{;}  \ottkw{F} \, \ottnt{X}  \ottsym{,}  \Gamma  \vdash_{\mathcal{L} }  \ottnt{A}}{%
{\ottdrulelXXFLeftName}{}%
}}


\newcommand{\ottdrulelXXGLeftName}[0]{\ottdrulename{l\_GLeft}}
\newcommand{\ottdrulelXXGLeft}[1]{\ottdrule[#1]{%
\ottpremise{\Theta  \ottsym{;}  \ottnt{B}  \ottsym{,}  \Gamma  \vdash_{\mathcal{L} }  \ottnt{A}}%
}{
\Theta  \ottsym{,}  \ottkw{Gf} \, \ottnt{B}  \ottsym{;}  \Gamma  \vdash_{\mathcal{L} }  \ottnt{A}}{%
{\ottdrulelXXGLeftName}{}%
}}

\newcommand{\ottdefnlseq}[1]{\begin{ottdefnblock}[#1]{$\Theta  \ottsym{;}  \Gamma  \vdash_{\mathcal{L} }  \ottnt{A}$}{}
\ottusedrule{\ottdrulelXXIArLeft{}}
\ottusedrule{\ottdrulelXXLArRight{}}
\ottusedrule{\ottdrulelXXLArLeft{}}
\ottusedrule{\ottdrulelXXFRight{}}
\ottusedrule{\ottdrulelXXFLeft{}}
\ottusedrule{\ottdrulelXXGLeft{}}
\end{ottdefnblock}}

%% defn type
\newcommand{\ottdruletyXXaxName}[0]{\ottdrulename{ty\_ax}}
\newcommand{\ottdruletyXXax}[1]{\ottdrule[#1]{%
}{
\Gamma  \ottsym{,}  \mathit{x}  \ottsym{:}  \ottnt{A}  \vdash  \mathit{x}  \ottsym{:}  \ottnt{A}}{%
{\ottdruletyXXaxName}{}%
}}


\newcommand{\ottdruletyXXfalseName}[0]{\ottdrulename{ty\_false}}
\newcommand{\ottdruletyXXfalse}[1]{\ottdrule[#1]{%
}{
\Gamma  \ottsym{,}  \mathit{x}  \ottsym{:}  \perp  \vdash   \mathsf{contra}   \ottsym{:}  \ottnt{A}}{%
{\ottdruletyXXfalseName}{}%
}}


\newcommand{\ottdruletyXXimpIName}[0]{\ottdrulename{ty\_impI}}
\newcommand{\ottdruletyXXimpI}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \ottsym{,}  \mathit{x}  \ottsym{:}  \ottnt{A}  \vdash  \ottnt{t}  \ottsym{:}  \ottnt{B}}%
}{
\Gamma  \vdash   \lambda  \mathit{x}  :  \ottnt{A} . \ottnt{t}   \ottsym{:}  \ottnt{A}  \to  \ottnt{B}}{%
{\ottdruletyXXimpIName}{}%
}}


\newcommand{\ottdruletyXXimpEName}[0]{\ottdrulename{ty\_impE}}
\newcommand{\ottdruletyXXimpE}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{t_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{A}  \to  \ottnt{B}  \quad  \Gamma  \vdash  \ottnt{t_{{\mathrm{2}}}}  \ottsym{:}  \ottnt{A}}%
}{
\Gamma  \vdash  \ottnt{t_{{\mathrm{1}}}} \, \ottnt{t_{{\mathrm{2}}}}  \ottsym{:}  \ottnt{B}}{%
{\ottdruletyXXimpEName}{}%
}}


\newcommand{\ottdruletyXXboxEName}[0]{\ottdrulename{ty\_boxE}}
\newcommand{\ottdruletyXXboxE}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{t}  \ottsym{:}  \Box \, \ottnt{B}}%
}{
\Gamma  \vdash  \mathsf{unbox}_\Box\, \, \ottnt{t}  \ottsym{:}  \ottnt{B}}{%
{\ottdruletyXXboxEName}{}%
}}


\newcommand{\ottdruletyXXboxIName}[0]{\ottdrulename{ty\_boxI}}
\newcommand{\ottdruletyXXboxI}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma  \vdash  \ottnt{t_{{\mathrm{1}}}}  \ottsym{:}  \Box \, \ottnt{A_{{\mathrm{1}}}}  \ottsym{,} \, ... \, \ottsym{,}  \Gamma  \vdash  \ottnt{t_{\ottmv{k}}}  \ottsym{:}  \Box \, \ottnt{A_{\ottmv{k}}}   \quad  \mathit{x_{{\mathrm{1}}}}  \ottsym{:}  \Box \, \ottnt{A_{{\mathrm{1}}}}  \ottsym{,} \, ... \, \ottsym{,}  \mathit{x_{\ottmv{k}}}  \ottsym{:}  \Box \, \ottnt{A_{\ottmv{k}}}  \vdash  \ottnt{t}  \ottsym{:}  \ottnt{B}}%
}{
\Gamma  \vdash   \mathsf{let}_\Box\, \mathit{x_{{\mathrm{1}}}}  \ottsym{:}  \Box \, \ottnt{A_{{\mathrm{1}}}}  \ottsym{,} \, ... \, \ottsym{,}  \mathit{x_{\ottmv{k}}}  \ottsym{:}  \Box \, \ottnt{A_{\ottmv{k}}} \,\mathsf{be}\, \ottnt{t_{{\mathrm{1}}}}  \ottsym{,} \, ... \, \ottsym{,}  \ottnt{t_{\ottmv{k}}} \,\mathsf{in}\, \ottnt{t}   \ottsym{:}  \Box \, \ottnt{B}}{%
{\ottdruletyXXboxIName}{}%
}}


\newcommand{\ottdruletyXXbboxEName}[0]{\ottdrulename{ty\_bboxE}}
\newcommand{\ottdruletyXXbboxE}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{t}  \ottsym{:}  \blacksquare \, \ottnt{B}}%
}{
\Gamma  \vdash  \mathsf{unbox}_\blacksquare\, \, \ottnt{t}  \ottsym{:}  \ottnt{B}}{%
{\ottdruletyXXbboxEName}{}%
}}


\newcommand{\ottdruletyXXbboxIName}[0]{\ottdrulename{ty\_bboxI}}
\newcommand{\ottdruletyXXbboxI}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma  \vdash  \ottnt{t_{{\mathrm{1}}}}  \ottsym{:}  \blacksquare \, \ottnt{A_{{\mathrm{1}}}}  \ottsym{,} \, ... \, \ottsym{,}  \Gamma  \vdash  \ottnt{t_{\ottmv{k}}}  \ottsym{:}  \blacksquare \, \ottnt{A_{\ottmv{k}}}   \quad  \mathit{x_{{\mathrm{1}}}}  \ottsym{:}  \blacksquare \, \ottnt{A_{{\mathrm{1}}}}  \ottsym{,} \, ... \, \ottsym{,}  \mathit{x_{\ottmv{k}}}  \ottsym{:}  \blacksquare \, \ottnt{A_{\ottmv{k}}}  \vdash  \ottnt{t}  \ottsym{:}  \ottnt{B}}%
}{
\Gamma  \vdash   \mathsf{let}_\blacksquare\, \mathit{x_{{\mathrm{1}}}}  \ottsym{:}  \blacksquare \, \ottnt{A_{{\mathrm{1}}}}  \ottsym{,} \, ... \, \ottsym{,}  \mathit{x_{\ottmv{k}}}  \ottsym{:}  \blacksquare \, \ottnt{A_{\ottmv{k}}} \,\mathsf{be}\, \ottnt{t_{{\mathrm{1}}}}  \ottsym{,} \, ... \, \ottsym{,}  \ottnt{t_{\ottmv{k}}} \,\mathsf{in}\, \ottnt{t}   \ottsym{:}  \blacksquare \, \ottnt{B}}{%
{\ottdruletyXXbboxIName}{}%
}}

\newcommand{\ottdefntype}[1]{\begin{ottdefnblock}[#1]{$\Gamma  \vdash  \ottnt{t}  \ottsym{:}  \ottnt{A}$}{}
\ottusedrule{\ottdruletyXXax{}}
\ottusedrule{\ottdruletyXXfalse{}}
\ottusedrule{\ottdruletyXXimpI{}}
\ottusedrule{\ottdruletyXXimpE{}}
\ottusedrule{\ottdruletyXXboxE{}}
\ottusedrule{\ottdruletyXXboxI{}}
\ottusedrule{\ottdruletyXXbboxE{}}
\ottusedrule{\ottdruletyXXbboxI{}}
\end{ottdefnblock}}

%% defn eq
\newcommand{\ottdruleeqXXbetaName}[0]{\ottdrulename{eq\_beta}}
\newcommand{\ottdruleeqXXbeta}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma  \ottsym{,}  \mathit{x}  \ottsym{:}  \ottnt{A}  \vdash  \ottnt{t_{{\mathrm{2}}}}  \approx  \ottnt{s_{{\mathrm{2}}}}  :  \ottnt{B}   \quad   \Gamma  \vdash  \ottnt{t_{{\mathrm{1}}}}  \approx  \ottnt{s_{{\mathrm{1}}}}  :  \ottnt{A} }%
}{
 \Gamma  \vdash  \ottsym{(}   \lambda  \mathit{x}  :  \ottnt{A} . \ottnt{t_{{\mathrm{2}}}}   \ottsym{)} \, \ottnt{t_{{\mathrm{1}}}}  \approx  \ottsym{[}  \ottnt{s_{{\mathrm{1}}}}  \ottsym{/}  \mathit{x}  \ottsym{]}  \ottnt{s_{{\mathrm{2}}}}  :  \ottnt{B} }{%
{\ottdruleeqXXbetaName}{}%
}}


\newcommand{\ottdruleeqXXunboxName}[0]{\ottdrulename{eq\_unbox}}
\newcommand{\ottdruleeqXXunbox}[1]{\ottdrule[#1]{%
\ottpremise{  \Gamma  \vdash  \ottnt{t_{{\mathrm{1}}}}  \approx  \ottnt{s_{{\mathrm{1}}}}  :  \Box \, \ottnt{A_{{\mathrm{1}}}}   \ottsym{,} \, ... \, \ottsym{,}   \Gamma  \vdash  \ottnt{t_{\ottmv{k}}}  \approx  \ottnt{s_{\ottmv{k}}}  :  \Box \, \ottnt{A_{\ottmv{k}}}    \quad   \mathit{x_{{\mathrm{1}}}}  \ottsym{:}  \Box \, \ottnt{A_{{\mathrm{1}}}}  \ottsym{,} \, ... \, \ottsym{,}  \mathit{x_{\ottmv{k}}}  \ottsym{:}  \Box \, \ottnt{A_{\ottmv{k}}}  \vdash  \ottnt{t}  \approx  \ottnt{s}  :  \ottnt{B} }%
}{
 \Gamma  \vdash  \mathsf{unbox}_\Box\, \, \ottsym{(}   \mathsf{let}_\Box\, \mathit{x_{{\mathrm{1}}}}  \ottsym{:}  \Box \, \ottnt{A_{{\mathrm{1}}}}  \ottsym{,} \, ... \, \ottsym{,}  \mathit{x_{\ottmv{k}}}  \ottsym{:}  \Box \, \ottnt{A_{\ottmv{k}}} \,\mathsf{be}\, \ottnt{t_{{\mathrm{1}}}}  \ottsym{,} \, ... \, \ottsym{,}  \ottnt{t_{\ottmv{k}}} \,\mathsf{in}\, \ottnt{t}   \ottsym{)}  \approx  \ottsym{[}  \ottnt{s_{{\mathrm{1}}}}  \ottsym{/}  \mathit{x_{{\mathrm{1}}}}  \ottsym{]} \, ... \, \ottsym{[}  \ottnt{s_{\ottmv{k}}}  \ottsym{/}  \mathit{x_{\ottmv{k}}}  \ottsym{]}  \ottnt{s}  :  \ottnt{B} }{%
{\ottdruleeqXXunboxName}{}%
}}


\newcommand{\ottdruleeqXXunbboxName}[0]{\ottdrulename{eq\_unbbox}}
\newcommand{\ottdruleeqXXunbbox}[1]{\ottdrule[#1]{%
\ottpremise{  \Gamma  \vdash  \ottnt{t_{{\mathrm{1}}}}  \approx  \ottnt{s_{{\mathrm{1}}}}  :  \blacksquare \, \ottnt{A_{{\mathrm{1}}}}   \ottsym{,} \, ... \, \ottsym{,}   \Gamma  \vdash  \ottnt{t_{\ottmv{k}}}  \approx  \ottnt{s_{\ottmv{k}}}  :  \blacksquare \, \ottnt{A_{\ottmv{k}}}    \quad   \mathit{x_{{\mathrm{1}}}}  \ottsym{:}  \blacksquare \, \ottnt{A_{{\mathrm{1}}}}  \ottsym{,} \, ... \, \ottsym{,}  \mathit{x_{\ottmv{k}}}  \ottsym{:}  \blacksquare \, \ottnt{A_{\ottmv{k}}}  \vdash  \ottnt{t}  \approx  \ottnt{s}  :  \ottnt{B} }%
}{
 \Gamma  \vdash  \mathsf{unbox}_\blacksquare\, \, \ottsym{(}   \mathsf{let}_\blacksquare\, \mathit{x_{{\mathrm{1}}}}  \ottsym{:}  \blacksquare \, \ottnt{A_{{\mathrm{1}}}}  \ottsym{,} \, ... \, \ottsym{,}  \mathit{x_{\ottmv{k}}}  \ottsym{:}  \blacksquare \, \ottnt{A_{\ottmv{k}}} \,\mathsf{be}\, \ottnt{t_{{\mathrm{1}}}}  \ottsym{,} \, ... \, \ottsym{,}  \ottnt{t_{\ottmv{k}}} \,\mathsf{in}\, \ottnt{t}   \ottsym{)}  \approx  \ottsym{[}  \ottnt{s_{{\mathrm{1}}}}  \ottsym{/}  \mathit{x_{{\mathrm{1}}}}  \ottsym{]} \, ... \, \ottsym{[}  \ottnt{s_{\ottmv{k}}}  \ottsym{/}  \mathit{x_{\ottmv{k}}}  \ottsym{]}  \ottnt{s}  :  \ottnt{B} }{%
{\ottdruleeqXXunbboxName}{}%
}}


\newcommand{\ottdruleeqXXreflName}[0]{\ottdrulename{eq\_refl}}
\newcommand{\ottdruleeqXXrefl}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{t}  \ottsym{:}  \ottnt{A}}%
}{
 \Gamma  \vdash  \ottnt{t}  \approx  \ottnt{t}  :  \ottnt{A} }{%
{\ottdruleeqXXreflName}{}%
}}


\newcommand{\ottdruleeqXXsymName}[0]{\ottdrulename{eq\_sym}}
\newcommand{\ottdruleeqXXsym}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma  \vdash  \ottnt{t_{{\mathrm{2}}}}  \approx  \ottnt{t_{{\mathrm{1}}}}  :  \ottnt{A} }%
}{
 \Gamma  \vdash  \ottnt{t_{{\mathrm{1}}}}  \approx  \ottnt{t_{{\mathrm{2}}}}  :  \ottnt{A} }{%
{\ottdruleeqXXsymName}{}%
}}


\newcommand{\ottdruleeqXXtransName}[0]{\ottdrulename{eq\_trans}}
\newcommand{\ottdruleeqXXtrans}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma  \vdash  \ottnt{t_{{\mathrm{1}}}}  \approx  \ottnt{t_{{\mathrm{2}}}}  :  \ottnt{A}   \quad   \Gamma  \vdash  \ottnt{t_{{\mathrm{2}}}}  \approx  \ottnt{t_{{\mathrm{3}}}}  :  \ottnt{A} }%
}{
 \Gamma  \vdash  \ottnt{t_{{\mathrm{1}}}}  \approx  \ottnt{t_{{\mathrm{3}}}}  :  \ottnt{A} }{%
{\ottdruleeqXXtransName}{}%
}}

\newcommand{\ottdefneq}[1]{\begin{ottdefnblock}[#1]{$ \Gamma  \vdash  \ottnt{t_{{\mathrm{1}}}}  \approx  \ottnt{t_{{\mathrm{2}}}}  :  \ottnt{A} $}{}
\ottusedrule{\ottdruleeqXXbeta{}}
\ottusedrule{\ottdruleeqXXunbox{}}
\ottusedrule{\ottdruleeqXXunbbox{}}
\ottusedrule{\ottdruleeqXXrefl{}}
\ottusedrule{\ottdruleeqXXsym{}}
\ottusedrule{\ottdruleeqXXtrans{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJtype}{
\ottdefniseq{}\ottdefnlseq{}\ottdefntype{}\ottdefneq{}}

\newcommand{\ottdefnss}{
\ottdefnsJtype
}

\newcommand{\ottall}{\ottmetavars\\[0pt]
\ottgrammar\\[5.0mm]
\ottdefnss}

\begin{document}
\ottall

\begin{verbatim}
Definition rules:        23 good    0 bad
Definition rule clauses: 44 good    0 bad
\end{verbatim}
\end{document}
